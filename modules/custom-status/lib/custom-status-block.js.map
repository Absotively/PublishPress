{"version":3,"sources":["custom-status-block.jsx"],"names":["__","wp","i18n","PluginPostStatusInfo","editPost","registerPlugin","plugins","withSelect","withDispatch","data","compose","SelectControl","components","statuses","window","PPCustomStatuses","map","s","label","name","value","slug","getStatusLabel","find","sideEffectL10nManipulation","status","node","document","querySelector","innerText","PPCustomPostStatusInfo","onUpdate","plugin","select","getEditedPostAttribute","dispatch","icon","render"],"mappings":"AAAA;;;;;;;;AASA,IAAI;AAACA,EAAAA;AAAD,IAAOC,EAAE,CAACC,IAAd;AACA,IAAI;AAACC,EAAAA;AAAD,IAAyBF,EAAE,CAACG,QAAhC;AACA,IAAI;AAACC,EAAAA;AAAD,IAAmBJ,EAAE,CAACK,OAA1B;AACA,IAAI;AAACC,EAAAA,UAAD;AAAaC,EAAAA;AAAb,IAA6BP,EAAE,CAACQ,IAApC;AACA,IAAI;AAACC,EAAAA;AAAD,IAAYT,EAAE,CAACS,OAAnB;AACA,IAAI;AAACC,EAAAA;AAAD,IAAkBV,EAAE,CAACW,UAAzB;AAEA;;;;AAGA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,gBAAP,CAAwBC,GAAxB,CAA4BC,CAAC,KAAK;AAACC,EAAAA,KAAK,EAAED,CAAC,CAACE,IAAV;AAAgBC,EAAAA,KAAK,EAAEH,CAAC,CAACI;AAAzB,CAAL,CAA7B,CAAf;;AACA,IAAIC,cAAc,GAAGD,IAAI,IAAIR,QAAQ,CAACU,IAAT,CAAcN,CAAC,IAAIA,CAAC,CAACG,KAAF,KAAYC,IAA/B,EAAqCH,KAAlE,C,CAEA;AACA;;;AACA,IAAIM,0BAA0B,GAAGC,MAAM,IAAI;AACvC,MAAIC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAX;;AACA,MAAIF,IAAJ,EAAU;AACNC,IAAAA,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,EAAkDC,SAAlD,GAA+D,GAAE7B,EAAE,CAAC,MAAD,CAAS,IAAGyB,MAAO,EAAtF;AACH;AACJ,CALD;AAOA;;;;;;AAIA,IAAIK,sBAAsB,GAAG,CAAC;AAACC,EAAAA,QAAD;AAAWN,EAAAA;AAAX,CAAD,KACzB,yBAAC,oBAAD;AACI,EAAA,SAAS,EAAG,uEAAsEA,MAAO;AAD7F,GAGI,qCAAKA,MAAM,KAAK,SAAX,GAAuBzB,EAAE,CAAC,sBAAD,EAAyB,cAAzB,CAAzB,GAAoEA,EAAE,CAAC,gCAAD,EAAmC,cAAnC,CAA3E,CAHJ,EAKKyB,MAAM,KAAK,SAAX,GAAuB,yBAAC,aAAD;AACpB,EAAA,KAAK,EAAC,EADc;AAEpB,EAAA,KAAK,EAAEA,MAFa;AAGpB,EAAA,OAAO,EAAEZ,QAHW;AAIpB,EAAA,QAAQ,EAAEkB;AAJU,EAAvB,GAKI,IAVT,EAYI;AAAO,EAAA,SAAS,EAAC;AAAjB,GACKN,MAAM,KAAK,SAAX,GAAuBzB,EAAE,CAAE,qDAAF,EAAwD,cAAxD,CAAzB,GAAmGA,EAAE,CAAC,gEAAD,EAAmE,cAAnE,CAD1G,CAZJ,CADJ;;AAmBA,IAAIgC,MAAM,GAAGtB,OAAO,CAChBH,UAAU,CAAE0B,MAAD,KAAa;AACpBR,EAAAA,MAAM,EAAEQ,MAAM,CAAC,aAAD,CAAN,CAAsBC,sBAAtB,CAA6C,QAA7C;AADY,CAAb,CAAD,CADM,EAIhB1B,YAAY,CAAE2B,QAAD,KAAe;AACxBJ,EAAAA,QAAQ,CAAEN,MAAF,EAAU;AACdU,IAAAA,QAAQ,CAAC,aAAD,CAAR,CAAwB/B,QAAxB,CAAiC;AAACqB,MAAAA;AAAD,KAAjC;AACAD,IAAAA,0BAA0B,CAACF,cAAc,CAACG,MAAD,CAAf,CAA1B;AACH;;AAJuB,CAAf,CAAD,CAJI,CAAP,CAUXK,sBAVW,CAAb;AAYAzB,cAAc,CAAC,kCAAD,EAAqC;AAC/C+B,EAAAA,IAAI,EAAE,YADyC;AAE/CC,EAAAA,MAAM,EAAEL;AAFuC,CAArC,CAAd","sourcesContent":["/**\n * ------------------------------------------------------------------------------\n * Based on Edit Flow\n * Author: Daniel Bachhuber, Scott Bressler, Mohammad Jangda, Automattic, and\n * others\n * Copyright (c) 2009-2019 Mohammad Jangda, Daniel Bachhuber, et al.\n * ------------------------------------------------------------------------------\n */\n\nlet {__} = wp.i18n;\nlet {PluginPostStatusInfo} = wp.editPost;\nlet {registerPlugin} = wp.plugins;\nlet {withSelect, withDispatch} = wp.data;\nlet {compose} = wp.compose;\nlet {SelectControl} = wp.components;\n\n/**\n * Map Custom Statuses as options for SelectControl\n */\nlet statuses = window.PPCustomStatuses.map(s => ({label: s.name, value: s.slug}));\nlet getStatusLabel = slug => statuses.find(s => s.value === slug).label;\n\n// Hack :(\n// @see https://github.com/WordPress/gutenberg/issues/3144\nlet sideEffectL10nManipulation = status => {\n    let node = document.querySelector('.editor-post-save-draft');\n    if (node) {\n        document.querySelector('.editor-post-save-draft').innerText = `${__('Save')} ${status}`;\n    }\n};\n\n/**\n * Custom status component\n * @param object props\n */\nlet PPCustomPostStatusInfo = ({onUpdate, status}) => (\n    <PluginPostStatusInfo\n        className={`publishpress-extended-post-status publishpress-extended-post-status-${status}`}\n    >\n        <h4>{status !== 'publish' ? __('Extended Post Status', 'publishpress') : __('Extended Post Status Disabled.', 'publishpress')}</h4>\n\n        {status !== 'publish' ? <SelectControl\n            label=\"\"\n            value={status}\n            options={statuses}\n            onChange={onUpdate}\n        /> : null}\n\n        <small className=\"publishpress-extended-post-status-note\">\n            {status !== 'publish' ? __(`Note: this will override all status settings above.`, 'publishpress') : __('To select a custom status, please unpublish the content first.', 'publishpress')}\n        </small>\n    </PluginPostStatusInfo>\n);\n\nlet plugin = compose(\n    withSelect((select) => ({\n        status: select('core/editor').getEditedPostAttribute('status')\n    })),\n    withDispatch((dispatch) => ({\n        onUpdate (status) {\n            dispatch('core/editor').editPost({status});\n            sideEffectL10nManipulation(getStatusLabel(status));\n        }\n    }))\n)(PPCustomPostStatusInfo);\n\nregisterPlugin('publishpress-custom-status-block', {\n    icon: 'admin-site',\n    render: plugin\n});\n"],"file":"custom-status-block.js"}